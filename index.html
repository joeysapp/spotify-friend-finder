<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>joeysapp.github.io.</title>
	<link rel="shortcut icon" type="image/png" href="favicon.gif"/>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/p5.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/addons/p5.dom.min.js"></script>
	<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

  <style>
  	body {
  		font-family: Helvetica;
  		font-size: 2em;
  		margin: 0;
  		/*padding: 3em;*/
  	}		
  </style>

  <script>
  	var h = 0;
  	var s = 255;
  	var b = 255;

  	var canvas;
  	var nodes = [];

  	var NODE_AMT = 1;

  	class Node {
  		constructor(x, y){
	  		this.pos = createVector(x,y);
	  		this.vel = createVector(0,0);
	  		this.acc = createVector(0,0);
	  		this.w = 32;
	  	}

	  	applyForce(PVector f){
	  		var t_f = PVector.div(f,this.m);
	  		this.acc.add(t_f);
	  	}

	  	update(){
	  		this.vel.add(this.acc);
	  		this.pos.add(this.vel);
	  		this.acc.mult(0);

	  		if (this.pos.y < this.w*2 || this.pos.y > windowHeight-this.w*2){
	  			// Hit the bottom or top! reee
	  			this.vel.mult(-1);
	  		}



	  	}

  		display(){
  			fill(255, 0, 0);
  			ellipse(this.pos.x, this.pos.y, this.w/2, this.w/2);
  		}
  	}

  	function setup(){
  		canvas = createCanvas(windowWidth, windowHeight);

  		textSize(24);

  		canvas.class("c");

  		nodes.push(new Node(windowWidth/2, windowHeight/2));

  		// Is a mobile device
  		if (window.DeviceOrientationEvent) {
			window.addEventListener('deviceorientation', or_handler);  
		}
  	}

  	function draw(){

  		if (h != null){
	  		background(h*512,s*512,b*512);
	  		fill(0);
			for (let x = -1; x < 2; x++){
			    text("H: "+h, 20+x,20);
			    text("H: "+h, 20,20+x);

			    text("S: "+s, 20+x,40);
			    text("S: "+s, 20,40+x);

			    text("B: "+b, 20+x,60);
			    text("B: "+b, 20,60+x);
			}
			fill(255);
	  		text("H: "+h,20, 20);
	  		text("S: "+s,20, 40);
	  		text("B: "+b,20,60);		
	  	}

	  	nodes.forEach(function(element){
	  		element.display();
	  		element.update();
	  	})
  	}

  	function windowResized() {
		resizeCanvas(windowWidth, windowHeight);
	}

	function or_handler(e) {
		if (e.alpha == null){
			// browser, don't do this

		} else {
			// e.alpha: [0 - 360], loops
			// ALSO CAN GO BACKWARDS
			// This is the clockwise position of the device
			// like a clock when placed flat.
			var alpha_m = map(e.alpha, -360, 360, -1., 1.);
			var beta_m = map(e.beta, -360, 360, -1., 1.);
			var gamma_m = map(e.gamma, -360, 360, -1., 1.);

			h = alpha_m;
			// find what angle they're at (starting)
			// then based on the rotation from that point
			// do stuff

			s = beta_m;
			// will typically be at [0, 0.20] if being held normally

			b = gamma_m;
			// will typically be [-0.15/25, 0.15/25] depends how
			// it is being held.

			nodes.forEach(function(element){
		  		element.acc.y += map(beta_m, -0.1, 0.20, -1, 1);
		  		element.acc.limit(10);
		  	})
		}
	
	}
  </script>

</head>

<body>
	<div id="main"></div>
</body>



</html>